<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&T Prioritization Framework Playground</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for radio buttons */
        .radio-label {
            transition: all 0.2s ease-in-out;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        input[type="radio"]:checked + .radio-label {
            background-color: #16a34a; /* green-600 */
            color: white;
            border-color: #16a34a; /* green-600 */
        }
        .result-card {
            transition: all 0.3s ease-in-out;
            transform-style: preserve-3d;
            position: relative;
        }
        .result-card.flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            position: absolute;
            width: 100%;
            height: 100%;
        }
        .card-back {
            transform: rotateY(180deg);
        }
        .score-indicator {
            background-color: #ecfdf5; /* green-50 */
            color: #166534; /* green-800 */
            padding: 0.125rem 0.625rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 600;
            opacity: 0.4;
            transition: all 0.2s ease-in-out;
        }
        input[type="radio"]:checked + .radio-label .score-indicator {
            opacity: 1;
            background-color: #dcfce7; /* green-100 */
            color: #15803d; /* green-700 */
            transform: scale(1.1);
        }
        #quadrant-dot {
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">D&T Prioritization Framework Playground</h1>
            <p class="mt-2 text-lg text-gray-600">Select options below to see how the priority score changes in real-time.</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- CONTROLS SECTION -->
            <div class="bg-white p-6 rounded-xl shadow-lg row-span-2">
                <h2 class="text-2xl font-bold mb-6 border-b pb-4">1. Define Your Project</h2>
                
                <div class="space-y-6">
                    <!-- Project Name -->
                    <div>
                        <label for="projectName" class="block text-sm font-medium text-gray-700 mb-1">Project Name</label>
                        <input type="text" id="projectName" value="Customer 360" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500">
                    </div>

                    <!-- Classification -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                            <span>Classification</span>
                        </h3>
                        <div id="classification" class="grid grid-cols-1 sm:grid-cols-3 gap-2">
                            <input type="radio" name="classification" id="class_growth" value="Growth" class="hidden" checked>
                            <label for="class_growth" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Growth</span><span class="score-indicator">+3</span></label>
                            
                            <input type="radio" name="classification" id="class_cost" value="Cost Saving" class="hidden">
                            <label for="class_cost" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Cost Saving</span><span class="score-indicator">+2</span></label>
                            
                            <input type="radio" name="classification" id="class_prod" value="Improve Productivity" class="hidden">
                            <label for="class_prod" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Productivity</span><span class="score-indicator">+1</span></label>
                        </div>
                    </div>

                    <!-- Value -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>
                            <span>Value</span>
                        </h3>
                        <div id="value_growth" class="value-group grid grid-cols-1 sm:grid-cols-3 gap-2">
                            <input type="radio" name="value_growth" id="val_growth_high" value="High" class="hidden" checked>
                            <label for="val_growth_high" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>High (>1M)</span><span class="score-indicator">+3</span></label>
                            <input type="radio" name="value_growth" id="val_growth_med" value="Medium" class="hidden">
                            <label for="val_growth_med" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Med (500K-1M)</span><span class="score-indicator">+2</span></label>
                            <input type="radio" name="value_growth" id="val_growth_low" value="Low" class="hidden">
                            <label for="val_growth_low" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Low (&lt;500K)</span><span class="score-indicator">+1</span></label>
                        </div>
                        <div id="value_cost" class="value-group hidden grid grid-cols-1 sm:grid-cols-3 gap-2">
                           <input type="radio" name="value_cost" id="val_cost_high" value="High" class="hidden" checked>
                            <label for="val_cost_high" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>High (>200K)</span><span class="score-indicator">+3</span></label>
                            <input type="radio" name="value_cost" id="val_cost_med" value="Medium" class="hidden">
                            <label for="val_cost_med" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Med (100-200K)</span><span class="score-indicator">+2</span></label>
                            <input type="radio" name="value_cost" id="val_cost_low" value="Low" class="hidden">
                            <label for="val_cost_low" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Low (&lt;100K)</span><span class="score-indicator">+1</span></label>
                        </div>
                        <div id="value_prod" class="value-group hidden grid grid-cols-1 sm:grid-cols-3 gap-2">
                            <input type="radio" name="value_prod" id="val_prod_high" value="High" class="hidden" checked>
                            <label for="val_prod_high" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>High (>2K)</span><span class="score-indicator">+3</span></label>
                            <input type="radio" name="value_prod" id="val_prod_med" value="Medium" class="hidden">
                            <label for="val_prod_med" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Med (1K-2K)</span><span class="score-indicator">+2</span></label>
                            <input type="radio" name="value_prod" id="val_prod_low" value="Low" class="hidden">
                            <label for="val_prod_low" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Low (&lt;1K)</span><span class="score-indicator">+1</span></label>
                        </div>
                    </div>

                    <!-- Ease of Execution -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" /></svg>
                            <span>Ease of Execution</span>
                        </h3>
                        <div id="ease" class="grid grid-cols-1 sm:grid-cols-3 gap-2">
                            <input type="radio" name="ease" id="ease_easy" value="Easy" class="hidden" checked>
                            <label for="ease_easy" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Easy</span><span class="score-indicator">+3</span></label>
                            <input type="radio" name="ease" id="ease_mod" value="Moderate" class="hidden">
                            <label for="ease_mod" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Moderate</span><span class="score-indicator">+2</span></label>
                            <input type="radio" name="ease" id="ease_hard" value="Hard" class="hidden">
                            <label for="ease_hard" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Hard</span><span class="score-indicator">+1</span></label>
                        </div>
                    </div>

                    <!-- MT Commitment -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1a6 6 0 00-1.78-4.125a6 6 0 00-9.44-1.684" /></svg>
                            <span>MT Commitment</span>
                        </h3>
                        <div id="commitment" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                            <input type="radio" name="commitment" id="commit_yes" value="Yes" class="hidden" checked>
                            <label for="commit_yes" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>Yes</span><span class="score-indicator">x1</span></label>
                            <input type="radio" name="commitment" id="commit_no" value="No" class="hidden">
                            <label for="commit_no" class="radio-label text-center p-3 border border-gray-300 rounded-md cursor-pointer font-medium"><span>No</span><span class="score-indicator">x0</span></label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RESULTS SECTION -->
            <div class="sticky top-8 h-[550px]"> <!-- Container with fixed height for stable sticky positioning -->
                <div class="result-card w-full h-full">
                    <!-- Back of the card (now first in HTML) -->
                    <div class="card-face card-back bg-gray-800 text-white p-6 rounded-xl shadow-2xl flex flex-col justify-between">
                        <div>
                            <h2 class="text-2xl font-bold mb-4 border-b border-gray-600 pb-4">Score Breakdown</h2>
                            <div class="space-y-3 text-lg">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-300">Classification Score</span>
                                    <span id="classScore" class="font-bold text-2xl bg-gray-700 px-3 py-1 rounded-md"></span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-300">Value Score</span>
                                    <span id="valueScore" class="font-bold text-2xl bg-gray-700 px-3 py-1 rounded-md"></span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-300">Ease of Execution Score</span>
                                    <span id="easeScore" class="font-bold text-2xl bg-gray-700 px-3 py-1 rounded-md"></span>
                                </div>
                                <hr class="border-gray-600 my-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-300">MT Commitment Multiplier</span>
                                    <span id="commitScore" class="font-bold text-2xl bg-gray-700 px-3 py-1 rounded-md"></span>
                                </div>
                            </div>
                        </div>
                        <div id="explanation" class="mt-4 text-center bg-gray-700 p-3 rounded-lg text-gray-300"></div>
                        <button id="flipBackButton" class="w-full mt-4 text-center text-gray-400 hover:text-white transition">&larr; Back to Final Score</button>
                    </div>
                    
                    <!-- Front of the card (now second in HTML) -->
                    <div class="card-face bg-green-600 text-white p-6 rounded-xl shadow-2xl flex flex-col justify-between">
                        <div>
                           <h2 class="text-2xl font-bold mb-1 border-b border-green-400 pb-4">2. See The Result</h2>
                           <p id="resultProjectName" class="text-center text-xl font-semibold mt-4 truncate"></p>
                        </div>
                        
                        <div class="my-2">
                            <p id="summarySentence" class="text-center text-green-100 italic px-4"></p>
                        </div>

                        <div class="text-center my-2">
                            <p class="text-lg text-green-200">Final Priority Score</p>
                            <p id="finalScore" class="text-7xl md:text-8xl font-bold tracking-tighter"></p>
                            <div class="w-full bg-green-700 rounded-full h-2.5 mt-2">
                                <div id="scoreGauge" class="bg-yellow-300 h-2.5 rounded-full transition-all duration-500"></div>
                            </div>
                            <p id="scoreLabel" class="text-sm font-semibold mt-1 text-green-200"></p>
                        </div>
                        
                        <div>
                            <p class="text-center text-sm text-green-200 mb-2">Calculation: (Classification + Value + Ease Of Execution) * MTs Commitment</p>
                            <div id="calculation" class="text-center text-2xl font-mono bg-green-700 p-3 rounded-lg"></div>
                            <button id="flipButton" class="w-full mt-4 text-center text-green-200 hover:text-white transition">Show Score Breakdown &rarr;</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- NEW VISUALIZATION SECTION -->
            <div class="bg-white p-6 rounded-xl shadow-lg lg:col-span-2">
                 <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" /><path stroke-linecap="round" stroke-linejoin="round" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" /></svg>
                    <span>3. Analyze the Project</span>
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Quadrant Chart -->
                    <div>
                        <h3 id="quadrantTitle" class="text-lg font-semibold text-gray-800 mb-2 text-center"></h3>
                        <div class="relative">
                            <svg id="quadrant-chart" viewBox="0 0 100 100" class="w-full h-full bg-gray-50 rounded-lg">
                                <!-- Quadrant Backgrounds -->
                                <rect x="50" y="0" width="50" height="50" fill="#dcfce7" /> <!-- Top Right -->
                                <rect x="0" y="0" width="50" height="50" fill="#fef3c7" /> <!-- Top Left -->
                                <rect x="50" y="50" width="50" height="50" fill="#fee2e2" /> <!-- Bottom Right -->
                                <rect x="0" y="50" width="50" height="50" fill="#f3f4f6" /> <!-- Bottom Left -->
                                <!-- Axes -->
                                <line x1="50" y1="0" x2="50" y2="100" stroke="#d1d5db" stroke-width="0.5"/>
                                <line x1="0" y1="50" x2="100" y2="50" stroke="#d1d5db" stroke-width="0.5"/>
                                <!-- Labels -->
                                <text x="75" y="8" font-size="5" text-anchor="middle" class="font-semibold fill-green-800">Do Now</text>
                                <text x="25" y="8" font-size="5" text-anchor="middle" class="font-semibold fill-amber-800">Plan For Later</text>
                                <text x="75" y="96" font-size="5" text-anchor="middle" class="font-semibold fill-red-800">Re-evaluate</text>
                                <text x="25" y="96" font-size="5" text-anchor="middle" class="font-semibold fill-gray-800">Don't Do</text>
                                <text x="50" y="48" font-size="3" text-anchor="middle" class="fill-gray-500">Value</text>
                                <text x="5" y="48" font-size="3" text-anchor="start" class="fill-gray-500">Low</text>
                                <text x="95" y="48" font-size="3" text-anchor="end" class="fill-gray-500">High</text>
                                <text transform="rotate(-90 52 50)" x="52" y="50" font-size="3" text-anchor="middle" class="fill-gray-500">Feasibility</text>
                                <text transform="rotate(-90 52 95)" x="52" y="95" font-size="3" text-anchor="start" class="fill-gray-500">Low</text>
                                <text transform="rotate(-90 52 5)" x="52" y="5" font-size="3" text-anchor="end" class="fill-gray-500">High</text>
                                <!-- Dot -->
                                <circle id="quadrant-dot" cx="0" cy="0" r="3" fill="#16a34a" stroke="white" stroke-width="0.5"/>
                            </svg>
                        </div>
                         <p id="quadrantDescription" class="text-sm text-center text-gray-600 mt-2 h-10"></p>
                    </div>
                    <!-- What-If Scenarios -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Improvement Suggestions</h3>
                        <div id="whatIf" class="space-y-3">
                           <!-- Suggestions will be added here by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DOM ELEMENTS ---
        const projectNameInput = document.getElementById('projectName');
        const valueGroups = document.querySelectorAll('.value-group');
        
        const resultProjectName = document.getElementById('resultProjectName');
        const summarySentenceDisplay = document.getElementById('summarySentence');
        const finalScoreDisplay = document.getElementById('finalScore');
        const scoreGauge = document.getElementById('scoreGauge');
        const scoreLabel = document.getElementById('scoreLabel');
        const calculationDisplay = document.getElementById('calculation');
        const classScoreDisplay = document.getElementById('classScore');
        const valueScoreDisplay = document.getElementById('valueScore');
        const easeScoreDisplay = document.getElementById('easeScore');
        const commitScoreDisplay = document.getElementById('commitScore');
        const explanationDisplay = document.getElementById('explanation');
        
        const resultCard = document.querySelector('.result-card');
        const flipButton = document.getElementById('flipButton');
        const flipBackButton = document.getElementById('flipBackButton');

        const quadrantDot = document.getElementById('quadrant-dot');
        const quadrantTitle = document.getElementById('quadrantTitle');
        const quadrantDescription = document.getElementById('quadrantDescription');
        const whatIfContainer = document.getElementById('whatIf');

        // --- SCORING LOGIC ---
        const SCORES = {
            classification: { 'Growth': 3, 'Cost Saving': 2, 'Improve Productivity': 1 },
            value: { 'High': 3, 'Medium': 2, 'Low': 1 },
            ease: { 'Easy': 3, 'Moderate': 2, 'Hard': 1 },
            commitment: { 'Yes': 1, 'No': 0 }
        };

        // --- MAIN CALCULATION FUNCTION ---
        function calculateAndDisplay() {
            // 1. Get current values from inputs
            const projectName = projectNameInput.value || "Example Project";
            const classification = document.querySelector('input[name="classification"]:checked').value;
            
            let value, valueText;
            if (classification === 'Growth') {
                const selectedRadio = document.querySelector('input[name="value_growth"]:checked');
                value = selectedRadio.value;
                valueText = document.querySelector(`label[for="${selectedRadio.id}"] > span:first-child`).textContent;
            } else if (classification === 'Cost Saving') {
                const selectedRadio = document.querySelector('input[name="value_cost"]:checked');
                value = selectedRadio.value;
                valueText = document.querySelector(`label[for="${selectedRadio.id}"] > span:first-child`).textContent;
            } else { // Improve Productivity
                const selectedRadio = document.querySelector('input[name="value_prod"]:checked');
                value = selectedRadio.value;
                valueText = document.querySelector(`label[for="${selectedRadio.id}"] > span:first-child`).textContent;
            }

            const ease = document.querySelector('input[name="ease"]:checked').value;
            const commitment = document.querySelector('input[name="commitment"]:checked').value;

            // 2. Calculate scores
            const classScore = SCORES.classification[classification];
            const valueScore = SCORES.value[value];
            const easeScore = SCORES.ease[ease];
            const commitScore = SCORES.commitment[commitment];
            const finalScore = (classScore + valueScore + easeScore) * commitScore;

            // 3. Update display
            resultProjectName.textContent = projectName;
            finalScoreDisplay.textContent = finalScore;
            
            classScoreDisplay.textContent = classScore;
            valueScoreDisplay.textContent = valueScore;
            easeScoreDisplay.textContent = easeScore;
            commitScoreDisplay.textContent = `x ${commitScore}`;
            
            calculationDisplay.innerHTML = `(<span class="text-yellow-300">${classScore}</span> + <span class="text-yellow-300">${valueScore}</span> + <span class="text-yellow-300">${easeScore}</span>) &times; <span class="text-red-300">${commitScore}</span> = ${finalScore}`;

            // 4. Build and display summary sentence
            const easeTextMap = { 'Easy': 'easy to execute', 'Moderate': 'moderately difficult to execute', 'Hard': 'hard to execute' };
            const commitmentTextMap = { 'Yes': 'with strong support from the MT', 'No': 'with no support from the MT' };
            const classificationText = classification === 'Improve Productivity' ? 'improving Productivity' : `supporting ${classification}`;
            
            const summary = `A "${projectName}" project ${classificationText}, providing a potential value of ${valueText}, that is ${easeTextMap[ease]} and ${commitmentTextMap[commitment]}.`;
            summarySentenceDisplay.textContent = summary;

            // 5. Update explanation text
            if (commitScore === 0) {
                explanationDisplay.textContent = "Without Management Team commitment, the project score is always zero, making it a low priority regardless of other factors.";
                finalScoreDisplay.classList.add('text-red-400');
            } else {
                explanationDisplay.textContent = "A high score indicates a valuable and feasible project with strong backing. This should be a top priority.";
                 finalScoreDisplay.classList.remove('text-red-400');
            }
            
            // 6. Update Score Gauge
            const maxScore = 9;
            const scorePercentage = (finalScore / maxScore) * 100;
            scoreGauge.style.width = `${scorePercentage}%`;
            if (finalScore >= 7) {
                scoreLabel.textContent = "Top Priority";
                scoreGauge.style.backgroundColor = '#22c55e'; // green-500
            } else if (finalScore >= 4) {
                scoreLabel.textContent = "Medium Priority";
                scoreGauge.style.backgroundColor = '#facc15'; // yellow-400
            } else {
                scoreLabel.textContent = "Low Priority";
                scoreGauge.style.backgroundColor = '#f87171'; // red-400
            }

            // 7. Update Quadrant Chart
            const totalValue = classScore + valueScore; // Max 6
            const feasibility = easeScore; // Max 3
            // Map scores to 0-100 coordinates. Add small offset to avoid edges.
            const x = (feasibility - 1) * (90 / 2) + 10; // Map 1-3 to 10-100
            const y = 100 - ((totalValue - 2) * (90 / 4) + 10); // Map 2-6 to 10-100, inverted Y
            quadrantDot.setAttribute('cx', x);
            quadrantDot.setAttribute('cy', y);
            
            // 8. Update Quadrant Title and Description with NEW, SIMPLER TERMS
            let quadrantName, quadrantDescText, quadrantColor;
            if (x >= 50 && y < 50) {
                quadrantName = "Do Now";
                quadrantDescText = "High value and easy to do. These are your top priorities.";
                quadrantColor = "text-green-700";
            } else if (x < 50 && y < 50) {
                quadrantName = "Plan For Later";
                quadrantDescText = "High value, but hard to do. These are important long-term goals that need careful planning.";
                quadrantColor = "text-amber-700";
            } else if (x >= 50 && y >= 50) {
                quadrantName = "Re-evaluate";
                quadrantDescText = "Easy to do, but low value. Re-evaluate if its benefits can be increased before proceeding.";
                quadrantColor = "text-red-700";
            } else { // x < 50 && y >= 50
                quadrantName = "Don't Do";
                quadrantDescText = "Low value and hard to do. These projects should be avoided.";
                quadrantColor = "text-gray-700";
            }
            quadrantTitle.innerHTML = `Current Quadrant: <span class="font-bold ${quadrantColor}">${quadrantName}</span>`;
            quadrantDescription.textContent = quadrantDescText;


            // 9. Update What-If Scenarios
            whatIfContainer.innerHTML = ''; // Clear old suggestions
            let suggestions = [];

            if (commitScore === 0) {
                const potentialScore = (classScore + valueScore + easeScore) * 1;
                suggestions.push({text: `If you gain MT Commitment, your score would jump from 0 to <strong>${potentialScore}</strong>.`, icon: '🤝'});
            } else {
                if (easeScore < 3) {
                    const potentialScore = (classScore + valueScore + 3) * commitScore;
                    const gain = potentialScore - finalScore;
                    suggestions.push({text: `Improving Ease of Execution to 'Easy' would raise your score by <strong>+${gain}</strong>.`, icon: '🚀'});
                }
                if (valueScore < 3) {
                    const potentialScore = (classScore + 3 + easeScore) * commitScore;
                    const gain = potentialScore - finalScore;
                    suggestions.push({text: `Increasing the project's Value to 'High' would raise your score by <strong>+${gain}</strong>.`, icon: '💰'});
                }
            }

            if (suggestions.length === 0 && commitScore > 0) {
                whatIfContainer.innerHTML = `<div class="flex items-center gap-3 p-3 bg-green-100 text-green-800 rounded-lg text-sm">
                    <span class="text-xl">🎉</span>
                    <span>This project is already well-optimized according to the framework!</span>
                </div>`;
            } else {
                suggestions.forEach(s => {
                    const div = document.createElement('div');
                    div.innerHTML = `<span class="text-xl">${s.icon}</span> <span>${s.text}</span>`;
                    div.className = 'flex items-center gap-3 p-3 bg-blue-100 text-blue-800 rounded-lg text-sm';
                    whatIfContainer.appendChild(div);
                });
            }
        }

        // --- EVENT LISTENERS ---

        // Centralized handler for all radio button changes
        function handleRadioChange(event) {
            // If the changed input is a classification radio, handle visibility
            if (event.target.name === 'classification') {
                const selectedValue = event.target.value;
                let targetGroupId;
                if (selectedValue === 'Growth') {
                    targetGroupId = 'value_growth';
                } else if (selectedValue === 'Cost Saving') {
                    targetGroupId = 'value_cost';
                } else { // Improve Productivity
                    targetGroupId = 'value_prod';
                }

                valueGroups.forEach(group => {
                    if (group.id === targetGroupId) {
                        group.classList.remove('hidden');
                    } else {
                        group.classList.add('hidden');
                    }
                });
            }
            
            // Run the calculation after any change
            calculateAndDisplay();
        }

        // Attach listeners
        projectNameInput.addEventListener('input', calculateAndDisplay); // For live typing
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', handleRadioChange);
        });

        // Card flip logic
        flipButton.addEventListener('click', () => {
            resultCard.classList.add('flipped');
        });
        flipBackButton.addEventListener('click', () => {
            resultCard.classList.remove('flipped');
        });

        // --- INITIAL CALCULATION ---
        window.addEventListener('load', calculateAndDisplay);

    </script>
</body>
</html>
